<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>Контакты - Портфолио Максима</title>
    <meta name="description" content="Свяжитесь с Максимом - студентом-разработчиком. Форма обратной связи и контактная информация.">
    <link rel="stylesheet" href="../styles/style.css">
</head>

<body>
    <!-- Skip to main content for keyboard users -->
    <a href="#main-content" class="skip-link">
        Перейти к основному содержимому
    </a>

    <div class="page">
        <!-- Header -->
        <header class="header" role="banner">
            <div class="container">
                <div class="header__content">
                    <h1 class="header__title">Контакты</h1>
                    <p class="header__subtitle">Свяжитесь со мной</p>
                </div>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="nav" aria-label="Основная навигация">
            <div class="container">
                <ul class="nav__list" role="menubar">
                    <li class="nav__item" role="none">
                        <a href="../index.html" class="nav__link" role="menuitem">Главная</a>
                    </li>
                    <li class="nav__item" role="none">
                        <a href="projects.html" class="nav__link" role="menuitem">Проекты</a>
                    </li>
                    <li class="nav__item" role="none">
                        <a href="diary.html" class="nav__link" role="menuitem">Дневник</a>
                    </li>
                    <li class="nav__item nav__item--active" role="none">
                        <a href="contacts.html" class="nav__link" role="menuitem" aria-current="page">Контакты</a>
                    </li>
                </ul>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main" id="main-content" role="main">
            <div class="container">
                <div class="contacts__content">
                    <!-- Contact Form -->
                    <section class="contact-form" aria-labelledby="contact-form-title">
                        <h2 id="contact-form-title" class="section-title">Свяжитесь со мной</h2>
                        
                        <form class="form" id="contactForm" novalidate>
                            <fieldset>
                                <legend class="visually-hidden">Информация для связи</legend>
                                
                                <div class="form__group">
                                    <label for="name" class="form__label">
                                        Имя <span class="required" aria-hidden="true">*</span>
                                        <span class="visually-hidden">обязательное поле</span>
                                    </label>
                                    <input type="text" 
                                           id="name" 
                                           name="name" 
                                           class="form__input" 
                                           placeholder="Введите ваше имя" 
                                           required
                                           aria-required="true"
                                           aria-describedby="name-help">
                                    <div id="name-help" class="help-text">
                                        Пожалуйста, введите ваше полное имя
                                    </div>
                                    <div id="name-error" class="error-text" role="alert" aria-live="polite" hidden></div>
                                </div>

                                <div class="form__group">
                                    <label for="email" class="form__label">
                                        Email <span class="required" aria-hidden="true">*</span>
                                        <span class="visually-hidden">обязательное поле</span>
                                    </label>
                                    <input type="email" 
                                           id="email" 
                                           name="email" 
                                           class="form__input" 
                                           placeholder="Введите ваш email" 
                                           required
                                           aria-required="true"
                                           aria-describedby="email-help">
                                    <div id="email-help" class="help-text">
                                        Мы отправим ответ на этот адрес
                                    </div>
                                    <div id="email-error" class="error-text" role="alert" aria-live="polite" hidden></div>
                                </div>

                                <div class="form__group">
                                    <label for="subject" class="form__label">
                                        Тема обращения <span class="required" aria-hidden="true">*</span>
                                        <span class="visually-hidden">обязательное поле</span>
                                    </label>
                                    <select id="subject" 
                                            name="subject" 
                                            class="form__input" 
                                            required
                                            aria-required="true"
                                            aria-describedby="subject-help">
                                        <option value="">Выберите тему обращения</option>
                                        <option value="project">Сотрудничество по проекту</option>
                                        <option value="job">Предложение о работе</option>
                                        <option value="question">Вопрос по проекту</option>
                                        <option value="other">Другое</option>
                                    </select>
                                    <div id="subject-help" class="help-text">
                                        Выберите наиболее подходящую тему для вашего сообщения
                                    </div>
                                    <div id="subject-error" class="error-text" role="alert" aria-live="polite" hidden></div>
                                </div>

                                <div class="form__group">
                                    <label for="message" class="form__label">
                                        Сообщение <span class="required" aria-hidden="true">*</span>
                                        <span class="visually-hidden">обязательное поле</span>
                                    </label>
                                    <textarea id="message" 
                                              name="message" 
                                              class="form__textarea" 
                                              rows="5" 
                                              placeholder="Введите ваше сообщение..." 
                                              required
                                              aria-required="true"
                                              aria-describedby="message-help"></textarea>
                                    <div id="message-help" class="help-text">
                                        Опишите подробно ваш вопрос или предложение
                                    </div>
                                    <div id="message-error" class="error-text" role="alert" aria-live="polite" hidden></div>
                                </div>
                            </fieldset>

                            <div class="form__actions">
                                <button type="submit" class="button button--primary form__button">
                                    Отправить сообщение
                                </button>
                                <button type="reset" class="button button--outline">
                                    Очистить форму
                                </button>
                            </div>
                        </form>
                    </section>

                    <!-- Contact Info -->
                    <section class="contact-info" aria-labelledby="contact-info-title">
                        <h2 id="contact-info-title" class="contact-info__title">Мои контакты</h2>
                        <div class="contact-info__items" role="list" aria-label="Способы связи">
                            <div class="contact-item" role="listitem">
                                <div class="contact-item__icon" aria-hidden="true">@</div>
                                <div class="contact-item__content">
                                    <h3 class="contact-item__title">Email</h3>
                                    <p class="contact-item__value">izosimov.m.i@edu.mirea.ru</p>
                                    <a href="mailto:izosimov.m.i@edu.mirea.ru" 
                                       class="button button--outline contact-action"
                                       aria-label="Написать письмо на izosimov.m.i@edu.mirea.ru">
                                        Написать письмо
                                    </a>
                                </div>
                            </div>

                            <div class="contact-item" role="listitem">
                                <div class="contact-item__icon" aria-hidden="true">💻</div>
                                <div class="contact-item__content">
                                    <h3 class="contact-item__title">GitHub</h3>
                                    <p class="contact-item__value">blur3773</p>
                                    <a href="https://github.com/blur3773" 
                                       class="button button--outline contact-action" 
                                       target="_blank"
                                       rel="noopener noreferrer"
                                       aria-label="Перейти на GitHub профиль blur3773 (откроется в новой вкладке)">
                                        Перейти на GitHub
                                    </a>
                                </div>
                            </div>

                            <div class="contact-item" role="listitem">
                                <div class="contact-item__icon" aria-hidden="true">📍</div>
                                <div class="contact-item__content">
                                    <h3 class="contact-item__title">Местоположение</h3>
                                    <p class="contact-item__value">Москва, Россия</p>
                                </div>
                            </div>
                        </div>

                        <!-- Availability -->
                        <div class="availability">
                            <h3 class="availability__title">Доступность</h3>
                            <p class="availability__text">
                                Открыт для новых проектов и сотрудничества. Обычно отвечаю в течение 24 часов.
                            </p>
                            <div class="availability__status">
                                <div class="availability__dot" aria-hidden="true"></div>
                                <span class="availability__label">Сейчас доступен для общения</span>
                            </div>
                        </div>
                    </section>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="footer" role="contentinfo">
            <div class="container">
                <div class="footer__content">
                    <p class="footer__copyright">© 2025 Портфолио Максима</p>
                    <div class="footer__links">
                        <a href="mailto:izosimov.m.i@edu.mirea.ru" class="footer__link">izosimov.m.i@edu.mirea.ru</a>
                        <a href="https://github.com/blur3773" 
                           class="footer__link" 
                           target="_blank"
                           rel="noopener noreferrer"
                           aria-label="GitHub профиль (откроется в новой вкладке)">GitHub</a>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    <script>
        // Enhanced keyboard navigation
        document.addEventListener('DOMContentLoaded', function() {
            // Focus management for better keyboard navigation
            const mainContent = document.getElementById('main-content');
            
            // Set focus to main content when skip link is used
            const skipLink = document.querySelector('.skip-link');
            if (skipLink) {
                skipLink.addEventListener('click', function(e) {
                    e.preventDefault();
                    mainContent.setAttribute('tabindex', '-1');
                    mainContent.focus();
                });
            }

            // Improved tab navigation for navigation menu
            const navLinks = document.querySelectorAll('.nav__link');
            const firstNavLink = navLinks[0];
            const lastNavLink = navLinks[navLinks.length - 1];

            // Handle tab wrapping in navigation
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Tab') {
                    // If shift+tab on first nav link, focus skip link
                    if (e.shiftKey && document.activeElement === firstNavLink) {
                        e.preventDefault();
                        skipLink.focus();
                    }
                    // If tab on last nav link and no shift, focus first focusable element in main content
                    else if (!e.shiftKey && document.activeElement === lastNavLink) {
                        e.preventDefault();
                        const firstFocusable = mainContent.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');
                        if (firstFocusable) {
                            firstFocusable.focus();
                        }
                    }
                }

                // Escape key to focus main content
                if (e.key === 'Escape') {
                    mainContent.focus();
                }
            });

            // Auto-focus main content on page load for screen readers
            setTimeout(() => {
                mainContent.setAttribute('tabindex', '-1');
                mainContent.focus();
            }, 100);
        });

        // Contact form functionality
        document.addEventListener('DOMContentLoaded', function() {
            const contactForm = document.getElementById('contactForm');
            const nameInput = document.getElementById('name');
            const emailInput = document.getElementById('email');
            const subjectInput = document.getElementById('subject');
            const messageInput = document.getElementById('message');

            // Функция для показа ошибок
            function showError(input, message) {
                const errorElement = document.getElementById(input.id + '-error');
                errorElement.textContent = message;
                errorElement.hidden = false;
                input.setAttribute('aria-invalid', 'true');
                input.classList.add('error');
            }

            // Функция для скрытия ошибок
            function hideError(input) {
                const errorElement = document.getElementById(input.id + '-error');
                errorElement.hidden = true;
                input.setAttribute('aria-invalid', 'false');
                input.classList.remove('error');
            }

            // Валидация в реальном времени
            nameInput.addEventListener('blur', function() {
                if (!this.value.trim()) {
                    showError(this, 'Поле "Имя" обязательно для заполнения');
                } else {
                    hideError(this);
                }
            });

            emailInput.addEventListener('blur', function() {
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!this.value.trim()) {
                    showError(this, 'Поле "Email" обязательно для заполнения');
                } else if (!emailRegex.test(this.value)) {
                    showError(this, 'Пожалуйста, введите корректный email адрес');
                } else {
                    hideError(this);
                }
            });

            subjectInput.addEventListener('change', function() {
                if (!this.value) {
                    showError(this, 'Пожалуйста, выберите тему обращения');
                } else {
                    hideError(this);
                }
            });

            messageInput.addEventListener('blur', function() {
                if (!this.value.trim()) {
                    showError(this, 'Поле "Сообщение" обязательно для заполнения');
                } else if (this.value.trim().length < 10) {
                    showError(this, 'Сообщение должно содержать не менее 10 символов');
                } else {
                    hideError(this);
                }
            });

            // Обработка отправки формы
            contactForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                let isValid = true;

                // Проверка всех полей
                [nameInput, emailInput, subjectInput, messageInput].forEach(input => {
                    if (input.type === 'select-one') {
                        input.dispatchEvent(new Event('change'));
                    } else {
                        input.dispatchEvent(new Event('blur'));
                    }
                    if (input.getAttribute('aria-invalid') === 'true') {
                        isValid = false;
                    }
                });

                if (isValid) {
                    const formData = {
                        name: nameInput.value,
                        email: emailInput.value,
                        subject: subjectInput.options[subjectInput.selectedIndex].text,
                        message: messageInput.value
                    };

                    // Здесь должна быть реальная отправка на сервер
                    console.log('Форма отправлена:', formData);
                    
                    // Показать сообщение об успехе
                    const successMessage = document.createElement('div');
                    successMessage.className = 'success-message';
                    successMessage.setAttribute('role', 'alert');
                    successMessage.setAttribute('aria-live', 'polite');
                    successMessage.innerHTML = `
                        <h3>Сообщение отправлено!</h3>
                        <p>Спасибо, ${formData.name}! Я свяжусь с вами в ближайшее время.</p>
                    `;
                    
                    contactForm.parentNode.insertBefore(successMessage, contactForm);
                    contactForm.reset();
                    
                    // Прокрутка к сообщению об успехе
                    successMessage.scrollIntoView({ behavior: 'smooth' });
                    
                    // Удалить сообщение через 5 секунд
                    setTimeout(() => {
                        successMessage.remove();
                    }, 5000);
                } else {
                    // Прокрутка к первой ошибке
                    const firstError = document.querySelector('[aria-invalid="true"]');
                    if (firstError) {
                        firstError.focus();
                        firstError.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }
                }
            });

            // Обработка сброса формы
            contactForm.addEventListener('reset', function() {
                [nameInput, emailInput, subjectInput, messageInput].forEach(hideError);
            });

            // Улучшение навигации с клавиатуры
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    // Сброс фокуса на основной контент
                    document.getElementById('main-content').focus();
                }
            });

            // Обработка клавиатуры для кнопок
            const buttons = document.querySelectorAll('button, .button');
            buttons.forEach(button => {
                button.addEventListener('keydown', function(e) {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        this.click();
                    }
                });
            });
        });
    </script>
</body>
</html>